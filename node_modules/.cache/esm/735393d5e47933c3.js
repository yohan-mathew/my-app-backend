_e47‍.x([["adminlog",()=>adminlog],["adminlog",()=>adminlog]]);const jwt= require('jsonwebtoken')

       const adminlog = async (req, res, next) => {
    try{
        const {name, password} = req.body;

        //bad request (user not authorized)
        if (name != process.env.NAME || password != process.env.PASSWORD){
            throw new Error("user not authorized")
        }

        const accessToken = jwt.sign(name, process.env.ACCESS_TOKEN_SECRET)

        return res.status(201).json({
            name: name,
            message: "welcome yohan",
            accessToken: accessToken
        })

        
    }
    catch(error) {
        next(error)
    }
};

